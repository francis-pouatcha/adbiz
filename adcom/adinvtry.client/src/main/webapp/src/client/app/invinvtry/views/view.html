<section data-ng-cloak class="mainbar" id="invIntryShowPanel">
<div class="error">
    <span data-ng-bind="error"></span>
</div>
<div class="panel panel-primary">
    <div class="panel-heading">
        <b><span data-ng-bind="'Entity_info.title' | translate"></span>: </b>
        <b><span data-ng-bind="'InvInvtry_invtryNbr_description.title' | translate"></span></b> <span data-ng-bind="invInvtry.identif"></span>
        <b><span data-ng-bind="'Entity_Of.title' | translate"></span></b> <span data-ng-bind="invInvtry.prepareDt | date:'dd MMM yyyy'"></span>
        <b><span data-ng-bind="'Entity_By.title' | translate"></span></b> <span data-ng-bind="invInvtry.login"></span>
        <button class="glyphicon glyphicon-collapse-down pull-right" data-toggle="collapse"
                data-parent="#invIntryShowPanel" data-target="#invInvtryInfoToggle"></button>
    </div>
    <div class="panel-collapse collapse" id="invInvtryInfoToggle">
        <div class="panel-body">
            <form name="invInvtryForm" id="invInvtryForm" novalidate>
                <div class="row">
                    <div class="form-group col-lg-2" ng-class="{ 'has-error' : invInvtryForm.invtryDt.$invalid }">
                        <label class=" control-label" for="invtryDt"><span data-ng-bind="'InvInvtry_invtryDt_description.title' | translate"></span></label>
                        
                        <div class="input-group" style="width:150px;">
                            <input type="text" class="form-control" id="invtryvalueDt" name="invtryvalueDt"
				            	data-datepicker-popup="dd-MM-yyyy" data-ng-model="invInvtry.valueDt" 
								data-is-open="dateConfig.invtryvalueDt.opened" 
								data-show-button-bar="false" data-ng-disabled="!invtryEditable"/>
				            <span class="input-group-btn">
				                <button style="height:34px;" class="btn btn-default" data-ng-click="openDateComponent('invtryvalueDt', $event)">
				                	<i class="glyphicon glyphicon-calendar"></i>
				                </button>
				            </span>
                        </div>
                    </div>
                    <div class="form-group col-lg-3" ng-class="{ 'has-error' : invInvtryForm.acsngUser.$invalid }">
                        <label class=" control-label" for="acsngUser"><span data-ng-bind="'InvInvtry_acsngUser_description.title' | translate"></span></label>
                        <input type="text" ng-model="invInvtry.login" id="acsngUser" name="acsngUser"
                               class="form-control" disabled autocomplete="off"
                               typeahead="loginName as (loginName.loginName + ' : ' + loginName.fullName) for loginName in invInvtryUtils.loadUsers($viewValue)"
                               typeahead-loading="loading" typeahead-min-length="3"
                               typeahead-on-select='onUserSelectedInShow($item, $model, $label)' />
                    </div>
                    <div class="form-group col-lg-4">
                        <label class=" control-label" for="invInvtryType"><span data-ng-bind="'InvInvtry_invInvtryType_description.title' | translate"></span>:</label>

                        <div ng-class="{ 'has-error' : invInvtryForm.invMode.$invalid }">
                            <!--<input class="form-control" ng-model="invInvtry.txType" disabled/>-->
                            <select class="form-control" name="invInvtryType" id="invInvtryType" data-ng-model="invInvtry.txType" data-ng-disabled="!invtryEditable"
                                    data-ng-options="invInvtryType.enumKey as (invInvtryType.translKey | translate)
	                   				for invInvtryType in invInvtryUtils.invInvtryTypes" >
                                <option value=""/>
                            </select>
                        </div>
                    </div>
                    <div class="form-group col-lg-2">
                        <label class=" control-label" for="invInvtryStatus"><span data-ng-bind="'InvInvtry_invtryStatus_description.title' | translate"></span>:</label>
                        <div>
                            <!--<input class="form-control" ng-model="invInvtry.status" disabled/>-->
                            <select class="form-control" name="invInvtryStatus" id="invInvtryStatus" data-ng-model="invInvtry.status"
                                    data-ng-options="invInvtryStatus.enumKey as (invInvtryStatus.translKey | translate)
                            for invInvtryStatus in invInvtryUtils.invInvntrStati" disabled>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">

                    <div class="form-group col-lg-3">
                        <label class=" control-label" for="invtryGroup"><span data-ng-bind="'InvInvtry_invtryGroup_description.title' | translate"></span></label>
                        <input type="text" data-ng-model="invInvtry.txGroup" id="invtryGroup" name="invtryGroup"
                               class="form-control" data-ng-disabled="!invtryEditable" />
                    </div>
                    <div class="form-group col-lg-3">
                        <label class=" control-label" for="createRangeStart"><span data-ng-bind="'InvInvtryItem_artNameStart_description.title' | translate"></span></label>
                        <input type="text" data-ng-model="invInvtry.rangeStart" id="createRangeStart" name="createRangeStart"
                               class="form-control" disabled />
                    </div>
                    <div class="form-group col-lg-3">
                        <label class=" control-label" for="createRangeEnd"><span data-ng-bind="'InvInvtryItem_artNameEnd_description.title' | translate"></span></label>
                        <input type="text" data-ng-model="invInvtry.rangeEnd" id="createRangeEnd" name="createRangeEnd"
                               class="form-control" disabled />
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-lg-12">
                        <label class=" control-label"><span data-ng-bind="'InvInvtry_descptn_description.title' | translate"></span>:</label>
                        <textarea rows="2" id="descptn" name="descptn" class="form-control" data-ng-model="invInvtry.descptn"
                                  maxlength="256" data-ng-disabled="!invtryEditable"></textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-5">
	                	<span class="pull-left">
	                   		<!--<button ng-click="makeMain(invInvtry)" ng-show="!invInvtryUtils.isInvtryClosed(invInvtry) && !invInvtryUtils.isInvtryPosted(invInvtry)" class="btn-success btn" ng-disabled="isMainInventory(invInvtry)" >{{'InvInvtry_mainInvtry_description.title'| translate}}</button>-->
						</span>
                    </div>
                    <div class="col-lg-2">
                        <a class="btn-danger btn" href="#/InvInvtrys"><i class="glyphicon glyphicon-list"></i>
                            <span data-ng-bind="'Entity_list.title' | translate"></span></a>
                    </div>
                    <div class="col-lg-5">
	               		<span class="pull-right">
                            <button data-ng-click="archive()"
                                    class="btn-danger btn"><i class="glyphicon glyphicon-trash" ></i> Archive
                            </button>
	                    	<button data-ng-click="check()"
                                    data-ng-show="!invInvtryUtils.isInvtryClosed(invInvtry) && !invInvtryUtils.isInvtryPosted(invInvtry)"
                                    class="btn-success btn"><span data-ng-bind="'Entity_validate.title' | translate"></span>
                            </button>
		                   <button data-ng-click="update();" data-ng-show="!invInvtryUtils.isInvtryPosted(invInvtry)"
                                   class="btn-success btn"><span data-ng-bind="'Entity_save.title' | translate"></span>
                           </button>
		                   <button data-ng-click="close();"
                                   data-ng-show="!invInvtryUtils.isInvtryClosed(invInvtry) && !invInvtryUtils.isInvtryPosted(invInvtry) && !invInvtry.conflictDt"
                                   class="btn-success btn"><span data-ng-bind="'InvInvtry_close_description.title' | translate"></span>
                           </button>
		                   <button data-ng-click="post();"
                                   data-ng-show="invInvtryUtils.isInvtryClosed(invInvtry) && !invInvtryUtils.isInvtryPosted(invInvtry)"
                                   class="btn-success btn"><span data-ng-bind="'InvInvtry_post_description.title' | translate"></span>
                           </button>
	               		</span>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading">
        <span><b><span data-ng-bind="'Entity_search.title' | translate"></span> <span data-ng-bind="'InvInvtryItem_description.title' | translate"></span></b></span>
        <button class="glyphicon glyphicon-collapse-down pull-right" data-toggle="collapse"
                data-parent="#invIntryShowPanel" data-target="#invInvtryItemSearchToggle"></button>
    </div>
    <div class="panel-collapse collapse" id="invInvtryItemSearchToggle">
        <div class="panel-body">
            <form name="invInvtryItemForm" id="invInvtryItemForm" novalidate>
                <div class="row">
                    <div class="form-group col-lg-2" data-ng-class="{ 'has-error' : invInvtryItemForm.artPic.$invalid }">
                        <label class=" control-label" for="artPic"><span data-ng-bind="'InvInvtryItem_artPic_description.title' | translate"></span></label>
                        <input type="text" data-ng-class="form-control" name="artPic" id="artPic" required
                               autocomplete="off" data-ng-model="searchInput.entity.artPic"
                               typeahead="article.identif as article.identif for article in invInvtryUtils.loadArticlesByPic($viewValue)"
                               typeahead-min-length="5" typeahead-loading="loading"
                               typeahead-on-select='onArticleSelectedInSearch($item, $model, $label)' />
                    </div>
                    <div class="form-group col-lg-2" ng-class="{ 'has-error' : invInvtryItemForm.lotPic.$invalid }">
                        <label class=" control-label" for="lotPic"><span data-ng-bind="'InvInvtryItem_lotPic_description.title' | translate"></span></label>
                        <input type="text" data-ng-class="form-control" name="lotPic" id="lotPic" autocomplete="off"
                               required data-ng-model="searchInput.entity.lotPic"
                               typeahead="articleLotSection.lotPic as articleLotSection.lotPic for articleLotSection in showLotsForArtPic($viewValue)"
                               typeahead-loading="loading" typeahead-min-length="1"
                               typeahead-on-select='onArticleLotSectionSelectedInSearch($item, $model, $label)' />
                    </div>
                    <div class="form-group col-lg-5">
                        <label class=" control-label" for="searchArtName"><span data-ng-bind="'InvInvtryItem_artName_description.title' | translate"></span></label>
                        <input type="text" class="form-control" id="searchArtName" autocomplete="off"
                               data-ng-model="searchInput.entity.artName" name="searchArtName"
                               typeahead="article as article.artName for article in invInvtryUtils.loadArticlesByName($viewValue)"
                               typeahead-loading="loading" typeahead-min-length="4"
                               typeahead-on-select='onArticleSelectedInSearchArtName($item, $model, $label)' />
                    </div>
                    <div class="form-group col-lg-3">
                        <label class=" control-label" for="asseccedQty"><span data-ng-bind="'InvInvtryItem_asseccedQty_description.title' | translate"></span></label>
                        <div data-ng-class="{ 'has-error' : invInvtryItemForm.asseccedQty.$invalid }">
                            <input type="text" class="form-control" required name="asseccedQty" id="asseccedQty"
                                   data-ng-model="searchInput.entity.asseccedQty" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-lg-2" data-ng-class="{ 'has-error' : invInvtryItemForm.sectionCode.$invalid }">
                        <label class=" control-label" for="sectionCode"><span data-ng-bind="'InvInvtryItem_section_description.title' | translate"></span></label>
                        <input type="text" data-ng-model="display.identif" id="sectionCode" name="sectionCode"
                               class="form-control" required
                               autocomplete="off"
                               typeahead="stkSection as (stkSection.identif + ' : ' + stkSection.name) for stkSection in invInvtryUtils.loadStkSectionArticleLots($viewValue)"
                               typeahead-loading="loading" typeahead-min-length="4"
                               typeahead-on-select='onSectionSelectedInSearch($item, $model, $label)' />
                    </div>
                    <div class="form-group col-lg-4">
                        <label class=" control-label" for="searchSectionName"><span data-ng-bind="'InvInvtryItem_sectionName_description.title' | translate"></span></label>
                        <input type="text" data-ng-model="display.sectionName" id="searchSectionName"
                               name="searchSectionName" class="form-control"
                               autocomplete="off"
                               typeahead="stkSection as (stkSection.sectionCode + ' : ' + stkSection.name) for stkSection in invInvtryUtils.loadStkSectionArticleLotsByName($viewValue)"
                               typeahead-loading="loading" typeahead-min-length="4"
                               typeahead-on-select='onSectionSelectedInSearch($item, $model, $label)' />
                    </div>
                    <div class="form-group col-lg-1">
                        <label class=" control-label" for="searchRangeStart"><span data-ng-bind="'InvInvtryItem_artNameStart_description.title' | translate"></span></label>
                        <input type="text" data-ng-model="searchInput.rangeStart" id="searchRangeStart"
                               name="searchRangeStart" class="form-control">
                    </div>
                    <div class="form-group col-lg-1">
                        <label class=" control-label" for="searchRangeEnd"><span data-ng-bind="'InvInvtryItem_artNameEnd_description.title' | translate"></span></label>
                        <input type="text" data-ng-model="searchInput.rangeEnd" id="searchRangeEnd" name="searchRangeEnd"
                               class="form-control" />
                    </div>
                    <div class="form-group col-lg-4">
                        <button data-ng-click="handleSearchRequestEvent()" class="btn btn-default "
                                style="margin-top: 23px;">
                            <i class="glyphicon glyphicon-search"></i>
                        </button>
                        <button data-ng-click="handleAlphabeticRequestEvent()" class="btn btn-default" style="margin-top: 23px;">
                            <i class="glyphicon glyphicon-sort-by-alphabet"></i>
                        </button>
                        <button data-ng-click="handleResetRequestEvent()" class="btn btn-default " style="margin-top: 23px;">
                            <i class="glyphicon glyphicon-flash"></i><span data-ng-bind="'Entity_reset.title' | translate"></span>
                        </button>
                        <button data-ng-click="handlePrintRequestEvent()" class="btn btn-default " style="margin-top: 23px;">
                            <i class="glyphicon glyphicon-print"></i>
                        </button>
                        <button class="btn btn-default" data-ng-disabled="invInvtryItemForm.$invalid"
                                data-ng-click="addItem(searchInput.entity)" style="margin-top: 23px;"
                                data-ng-show="invInvtryUtils.isInvtryOpen(invInvtry)">
                            <i class="glyphicon glyphicon-plus"></i><span data-ng-bind="'Entity_add.title' | translate"></span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="panel panel-default" id="panelV">
    <div class="panel-heading">
        <b><span data-ng-bind="'InvInvtryItem_description.title' | translate"></span></b>
        <span data-ng-show="invInvtryItems().length==0 && showConfilct" class="red" >products are loading ... please wait</span>
    </div>
    <div class="panel-body">
<!--         <table data-st-table="data.invInvtrys" data-st-pipe="callServer" class="table table-bordered  table-striped"> -->
        <table class="table table-bordered  table-striped">
            <thead>
            <tr>
                <th class="clo-lg-1"><span data-ng-bind="'InvInvtryItem_section_description.title' | translate"></span></th>
                <th class="clo-lg-1"><span data-ng-bind="'InvInvtryItem_lotPic_description.title' | translate"></span></th>
                <th class="clo-lg-1"><span data-ng-bind="'InvInvtryItem_artPic_description.title' | translate"></span></th>
                <th class="col-lg-4"><span data-ng-bind="'InvInvtryItem_artName_description.title' | translate"></span></th>
                <th class="col-lg-1"><span data-ng-bind="'InvInvtryItem_expirDt_description.title' | translate"></span></th>
                <th class="col-lg-1"><span data-ng-bind="'InvInvtryItem_acsngUser_description.title' | translate"></span></th>
                <th class="col-lg-1"><span data-ng-bind="'InvInvtryItem_acsngDt_description.title' | translate"></span></th>
                <th class="col-lg-1"><span data-ng-bind="'InvInvtryItem_asseccedQty_description.title' | translate"></span></th>
                <th class="col-lg-1">
                    <span data-ng-show="!invInvtry.conflictDt"><i class="glyphicon glyphicon-ok-circle" style="color:green"></i></span>
                    <span data-ng-show="invInvtry.conflictDt"><i class="glyphicon glyphicon-ban-circle" style="color:red"></i></span>
                </th>
            </tr>
<!--             <tr> -->
<!--                	<th><input data-st-search="section" class="input-sm form-control" type="search"/></th> -->
<!--                	<th><input data-st-search="lotPic" class="input-sm form-control" type="search"/></th> -->
<!--           		<th><input data-st-search="artPic" class="input-sm form-control" type="search"/></th> -->
<!--           		<th><input data-st-search="artName" class="input-sm form-control" type="search"/></th> -->
<!--           		<th><st-date-search predicate="expirDt" selected-date="query"></st-date-search></th> -->
<!--           		<th><input data-st-search="acsngUser" class="input-sm form-control" type="search"/></th> -->
<!--           		<th><input data-st-search="acsngDt" class="input-sm form-control" type="search"/></th> -->
<!--           		<th><input data-st-search="asseccedQty" class="input-sm form-control" type="search"/></th> -->
<!--           		<th></th> -->
<!--             </tr> -->
            </thead>
            <tbody>
            <tr data-ng-repeat="invtryItem in invInvtryItems()">
                <td><span data-ng-bind="invtryItem.section"></span></td>
                <td><span data-ng-bind="invtryItem.lotPic"></span></td>
                <td><span data-ng-bind="invtryItem.artPic"></span></td>
                <td><span data-ng-bind="invtryItem.artName"></span></td>
                <td name="expirDtCell" data-ng-dblclick="editingExpirDt(invtryItem, $event)">
                    <span class="" data-ng-show="invtryItem.editingExpirDt">
                        <input type="datetime" date-time view="date" min-view="date" views="['date']"
                               dismiss="true" format="dd-MM-yyyy" ad-enter="updateItem(invtryItem)"
                               data-ng-model="invtryItem.expirDt" class="form-control">
                    </span>
                    <span data-ng-show="!invtryItem.editingExpirDt"><span data-ng-bind="invtryItem.expirDt | date:'dd-MM-yyyy'"></span></span>
                </td>
                <td><span data-ng-bind="invtryItem.acsngUser"></span></td>
                <td data-ng-show="!invtryItem.disabledDt"><span data-ng-bind="invtryItem.acsngDt | date:'dd-MM-yyyy HH:mm'"></span></td>
                <td data-ng-show="invtryItem.disabledDt" style="color: red; text-decoration: line-through;"><span data-ng-bind="invtryItem.acsngDt | date:'dd-MM-yyyy HH:mm'"></span></td>
                <td name="asseccedQtyCell" data-ng-dblclick="editingAsseccedQty(invtryItem,$event)">
                    <input type="text" name="asseccedQty" ad-focus="invtryItem.editingAsseccedQty"
                           ad-enter="updateItem(invtryItem)" style="width: 35px"
                           data-ng-model="invtryItem.asseccedQty" data-ng-show="invtryItem.editingAsseccedQty" data-ng-blur="updateItem(invtryItem)" />
                    <span data-ng-show="!invtryItem.editingAsseccedQty && !invtryItem.disabledDt"><span data-ng-bind="invtryItem.asseccedQty | number:0"></span></span>
                    <span data-ng-show="!invtryItem.editingAsseccedQty && invtryItem.disabledDt" style="color: red; text-decoration: line-through;"><span data-ng-bind="invtryItem.asseccedQty | number:0"></span></span>
                </td>
                <td>
                    <div data-ng-show="!invInvtryUtils.isInvtryOpen(invInvtry)">
                        <span data-ng-show="!invtryItem.disabledDt" data-ng-bind="invtryItem.expectedQty | number:0"></span>
                        <span data-ng-show="invtryItem.disabledDt" data-ng-bind="invtryItem.expectedQty | number:0" style="color: red; text-decoration: line-through;" ></span>
                    </div>
                    <div data-ng-show="invInvtryUtils.isInvtryOpen(invInvtry)">
                        	<span data-ng-show="!invtryItem.editing && !invtryItem.disabledDt">
	                        	<a data-ng-click="editingItem(invtryItem)" class=""><i class="glyphicon glyphicon-edit"></i></a>
                        	</span>
                           <span data-ng-show="invtryItem.editing">
                                <a data-ng-click="updateItem(invtryItem)" class=""><i class="glyphicon glyphicon-save"></i></a>
                            </span>
                        	<span data-ng-show="!invtryItem.editing && invtryItem.disabledDt" style="margin-left:10px">
	                        	<a data-ng-click="enableItem(invtryItem)" class=""><i class="glyphicon glyphicon-edit red"></i></a>
                        	</span>
                        	<span data-ng-show="invtryItem.editing && !invtryItem.disabledDt" class="pull-right" style="margin-left: 10px">
	                        	<a data-ng-click="disableItem(invtryItem)" class=""><i class="glyphicon glyphicon-trash"></i></a>
                        	</span>
                        	<span data-ng-show="invtryItem.editing" class="pull-right" style="margin-left: 10px">
	                        	<a data-ng-click="cancelEditItem(invtryItem)" class=""><i class="glyphicon glyphicon-remove"></i></a>
                        	</span>
                    </div>
                </td>
            </tr>
            </tbody>
<!--             <tfoot> -->
<!-- 				<tr> -->
<!-- 					<td colspan="15" class="text-center"> -->
<!-- 						<div data-st-pagination="" data-st-items-by-page="itemsByPage"></div> -->
<!-- 					</td> -->
<!-- 				</tr> -->
<!-- 			</tfoot> -->
        </table>
        <ul class="pull-right">
            <pagination total-items="totalItems()" items-per-page="itemPerPage()" class="pagination-sm"
                        ng-model="currentPage" ng-change="paginate()"></pagination>
        </ul>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-body">
        <div class="row">
            <div class="col-lg-12">
                	<span class="pull-left">
		                <a class="btn-danger btn" href="#/InvInvtrys"><i class="glyphicon glyphicon-list"></i>
                            <span data-ng-bind="'Entity_list.title' | translate"></span></a>
                	</span>
                	<span class="pull-right" data-ng-show="!invInvtryUtils.isInvtryPosted(invInvtry)">
                    	<a class="btn-danger btn" data-toggle="collapse" data-parent="#invIntryShowPanel"
                           data-target="#invInvtryInfoToggle"><i class="glyphicon glyphicon-edit"></i>
                            <span data-ng-bind="'Entity_edit.title' | translate"></span></a>
                    </span>
                <div class="col-lg-4">
                	<span class="pull-left">
                    	<button class="btn-default btn" data-ng-click="showConflict()" ><i class="glyphicon glyphicon-tasks"></i><span data-ng-bind="'show_conflict.title' | translate"></span></button>
	                </span>
                </div>
                <div class="col-lg-2">
                	<span class="pull-right">
                    	<button class="btn-default btn" data-ng-click="reload()" ><i class="glyphicon glyphicon-refresh"></i><span data-ng-bind="'reload.title' | translate"></span></button>
	                </span>
                </div>
            </div>
        </div>
    </div>
</div>
</section>
